# Screenwriter üé¨

**Screenwriter** is an advanced AI agent designed to autonomously research, conceptualize, and write screenplays. It leverages the Google GenAI (Gemini) models to perform high-level cognitive tasks, managing its own state, goals, and creative process. It uses an operator defined *Meta Goal* to guide its goal creation and planning process. It will be eventually implemented with a remotion templater to generate video essay style videos with the screenplay scripts generated by the agent.

## üöÄ Concept

The core idea is to create a digital "screenwriter" that takes the operators media, essay, and or story and use it to create a screenplay script that it can fully understand and turn into a video with remotion. It doesn't just "complete text"; it:
1.  **Thinks**: maintains an internal monologue and semantic state.
2.  **Plans**: creates goals and breaks them down into actionable plans.
3.  **Researches**: (Planned) accesses external media and information. 
4.  **Writes**: iteratively generates content from abstract ideas to concrete scripts and organizes it into a modular and repeatable screenplay script.
5.  **Reviews**: reviews the generated content and makes necessary revisions.
6.  **Implements**: implements the screenplay script into a video with remotion.

## üèóÔ∏è Architecture

The project follows a bio-inspired Agentic architecture:

### 1. The Agent (`src/agent.ts`)
The top-level entity. It is the vessel for the "Brain".

### 2. The Brain (`src/agent/brain.ts`)
The central controller. It manages:
*   **Semantic State**: The "memory" of the agent (Past, Current, Future).
*   **Faculties**: The capabilities of the agent (Language, Thought).
*   **Thinking Speed**: Dynamically switches between models based on task complexity.

### 3. Faculties
*   **Language (`src/agent/language.ts`)**: The interface to the raw GenAI model. It handles the "how" of communication, applying the current cognitive configuration (thinking level/speed).
*   **Thought (`src/agent/thought.ts`)**: The higher-level intellect. It uses the Language faculty to process abstract concepts, review work, and generate new ideas (Hypotheses, Topics).

### 4. Semantic State (`src/agent/semantics/semantic-state.ts`)
A structured memory system that tracks:
*   **Abstract Identity**: What, Where, Why, How.
*   **Temporal Context**: Past (Experience), Current (Focus), and Future (Desires).

## ‚öôÔ∏è Configuration & Models

The agent supports various "Thinking Shapes" which define the model and reasoning depth used for generation.

### Supported Models (`ThoughtSpeed`)
*   **`THOUGHTFUL`** (`gemini-3-pro-preview`): High reasoning capability. Best for complex creative writing and deep analysis. Supports `ThinkingLevel.HIGH` (Clear).
*   **`STANDARD`** (`gemini-3-flash-preview`): Balanced performance. Good for general drafting and structure.
*   **`FAST`** (`gemini-2.5-flash`): Optimized for speed. Best for quick validation or simple data processing. *Does not support Chain of Thought.*

### Thinking Clarity (`ThoughtClarity`)
Controls the depth of the model's internal reasoning (Chain of Thought).
*   **`CLEAR`** (High): Detailed, step-by-step reasoning.
*   **`INTUITIVE`** / **`IMPRESSIONISTIC`** (Medium): Balanced reasoning.
*   **`UNSPECIFIED`**: Default model behavior.

## üõ†Ô∏è Usage

### Installation
```bash
bun install
```

### Environment Setup
Create a `.env` file in the root directory:
```env
GOOGLE_GENAI_API_KEY=your_api_key_here
```

### Usage Example
```typescript
import { Agent } from "./src/agent";
import { ThoughtSpeed, ThoughtClarity } from "./src/agent/thought";

// Create a new autonomous agent with specific config
const screenwriter = Agent.new("Writer-Bot", metagoal, {
    root_instruction: "You are a creative writer.",
    google_genai_config: {
        systemInstruction: "Write a sci-fi story.",
        current_thinking_shape: {
            thinkingSpeed: ThoughtSpeed.THOUGHTFUL,
            thinkingLevel: ThoughtClarity.CLEAR,
            includeThoughts: true
        }
    }
});

// Generate a new goal
const goal = await screenwriter.newGoal(abstract_state, metadata);
console.log(goal.detailed);
```

## üß™ Testing & Walkthroughs

The project includes a robust test suite to verify the agent's functionality.

### Running Tests
To run all tests:
```bash
bun test
```

### Test Walkthroughs

#### 1. Agent Configuration (`tests/agent-config.test.ts`)
**Purpose:** Verifies that the Agent correctly applies your configuration (Model, Thinking Level) to the API calls.
*   **What it does:** Instantiates an agent with `FAST` and `THOUGHTFUL` configurations and sends real requests to Google GenAI.
*   **Why it matters:** Ensures that when you ask for "Deep Reasoning", the agent actually uses the more capable model, and when you ask for "Speed", it uses the faster model.
*   **Output:** Logs the generated "Detailed Goal" description to the console.

#### 2. Thought Shape Comparison (`tests/thought-shape-comparison.test.ts`)
**Purpose:** Visualizes the qualitative difference between different models.
*   **What it does:** Runs the *same* creative prompt ("Cyberpunk City Concept") through three different configurations:
    1.  **FAST** (`gemini-2.5-flash`): Expect quick, direct output.
    2.  **STANDARD** (`gemini-3-flash-preview`): Expect better structure and coherence.
    3.  **THOUGHTFUL** (`gemini-3-pro-preview`): Expect deep, nuanced, and highly creative output with extensive internal reasoning.
*   **How to run:**
    ```bash
    bun test tests/thought-shape-comparison.test.ts
    ```

#### 3. General GenAI Integrity (`tests/genai.test.ts`)
**Purpose:** Basic sanitary check.
*   **What it does:** Verifies that the Agent, Brain, and Faculties are correctly instantiated and wired together.
*   **Why it matters:** Prevents regressions in the core architecture (e.g., ensuring the Brain always has a Language faculty).

---
*Built with ‚ù§Ô∏è by the Advanced Agentic Coding Team*
